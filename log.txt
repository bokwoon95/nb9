catalog.go
fs.go
fs_local.go
fs_remote.go
init.go
notebrew.go
template_parser.go
file_handler.go
...
serve_http.go
notebrew/main.go

/themes/path-to-image.png
/themes/path-to-template.html
/themes/path-to-font.ttf

{{ template "/themes/brassica/post.html" $ }}

TODO: instead of checking if a buffer is safe to put back if it's below 1 MB, we pull a bytes.Buffer from the pool only if the file size is guaranteed to be below 1<<18. Otherwise, we preallocate a bytes.Buffer from scratch and call buf.Grow(int(fileInfo.Size())) on it. The threshold for calculating an ETag is 1 MB, but the threshold for pulling out a buffer from the pool is ~262 KB.
TODO: work on listDirectory so that we can switch over to fileHandler() asap and remove file.go/directory.go.
TODO: list_root_directory.html: separate the site folders into its own separate section with a "sites" header (non-link).
    Move the "+ create site" button down to the site folders section.
    Now it becomes clear that pagination only works on the site folders, the normal folders are always on top. And when we are in a site folder the site folder section goes away entirely.
    More importantly, this aligns with how we implement displaying the root directory: first we pull out the normal folders, then we iterate the site folders.
TODO: /users/language/?redirect=foo/bar/baz which lets people set the language code in a cookie and redirects them back to the page. Every page is language-aware by pulling out the language code from the cookie. And then in the notebrew navbar we have a little language switcher icon (a globe) that simply links to /users/language/.
TODO: main.go: for filesDB on SQLite, we should set the page size to 8192 instead for best blob performance (https://www.sqlite.org/intern-v-extern-blob.html)

cdn.nbrew.io is used to display cdn sites
never cache a page on the cdn as this would cause bokwoon.nbrew.io and www.nbrew.io/@bokwoon to display the same pages, which would make it confusing for the Google crawler/bad for SEO but also removes the sandboxing effect that subdomains have to separate site content. Hence, cdn.nbrew.io should only ever serves assets (URLs with extensions), and it will return 404 for pages (URLs without extensions). The cdn will never be able to pull page data from the www.nbrew.io, only asset data.

notebrew-config/
notebrew-users.db
notebrew-files/
notebrew-files.db
notebrew-objects/

notebrew-config/metrics.json (site-specific metrics? or not, since we are aiming to put everything on one server at first)
notebrew-config/metrics.txt
Requests per second (mean) = xxx
Requests per second (Q1)   = xxx
Requests per second (Q2)   = xxx
Requests per second (Q3)   = xxx
Latency (mean) = xxx
Latency (Q1)   = xxx
Latency (Q2)   = xxx
Latency (Q3)   = xxx

TODO: i18n.go
01. en
02. ms
03. zh
04. ja
05. ko
06. es
07. fr
08. it
09. ru
10. pt
